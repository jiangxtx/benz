
## node端 & client端事件轮询的差异

先看一个例子：

```js
setTimeout(() => {
    console.log('1');
    Promise.resolve().then(() => console.log('2'));
}, 0)
setTimeout(() => {
    console.log('3');
    Promise.resolve().then(() => console.log('4'));
}, 0)
```

以上代码在 `node11` 以下版本的执行结果是：`1 3 2 4`。但是在`node11`以上的版本中执行的结果为：`1 2 3 4`，这和浏览器端保持了一致。

浏览器中，事件轮询时，每次只从宏任务事件队列中取出一个来执行，执行完后进入下一轮的事件循环周期。所以，浏览器中肯定是输出：`1 2 3 4`。

而Node端，`node11`版本前，一次会执行完宏任务队列中所有的事件，所以输出结果是：`1 3 2 4`。在`v11`版本之后，这一点和浏览器端保持了一致。

